{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "What makes a country happy? - 2022",
  "width": 300,
  "height": 350,
  "background": "#E8E8E8",
  "data": {
    "url": "https://raw.githubusercontent.com/vjak0002/fit3179-assignment2/main/data/countries-factors-2022.csv",
    "format": { "type": "csv" }
  },
  "transform": [
    {
      "filter": {
        "field": "country",
        "oneOf": [
          "Finland",
          "Denmark",
          "Iceland",
          "Switzerland",
          "Netherlands",
          "Luxembourg",
          "Sweden",
          "Norway",
          "Israel",
          "New Zealand"
        ]
      }
    },
    {
      "calculate": "join([datum.rank,'. ',datum.country,' (',datum.score,')'], '')",
      "as": "y-axis labels"
    }
  ],
  "mark": "bar",
  "encoding": {
    "x": {
      "field": "Factor Score",
      "type": "quantitative",
      "title": "Happiness Index",
      "axis": {
        "labelFont": "Gill Sans",
        "titleFont": "Gill Sans"
      }
    },
    "y": {
      "field": "y-axis labels",
      "type": "nominal",
      "title": "",
      "sort": {
        "field": "datum.rank",
        "order": "ascending"
      },
      "axis": {
        "labelAlign": "left",
        "labelPadding": 100,
        "ticks": false,
        "labelFont": "Gill Sans"
      }
    },
    "color": {
      "field": "Factor",
      "type": "nominal",
      "title": "Explained by",
      "scale": {
        "domain": [
          "Dystopia (1.83) + residual",
          "Freedom to make life choices",
          "GDP per capita",
          "Generosity",
          "Healthy life expectancy",
          "Perceptions of corruption",
          "Social support"
        ],
        "range": [
          "#1f77b4",
          "#ff7f0e",
          "#2ca02c",
          "#d62728",
          "#9467bd",
          "#8c564b",
          "#000000"
        ]
      },
      "legend": null
    },
    "tooltip": [
      {
        "field": "Factor",
        "type": "nominal",
        "title": "Explained by"
      },
      {
        "field": "Factor Score",
        "type": "quantitative",
        "title": "Happiness Index"
      }
    ]
  },
  "config": {
    "view": { "stroke": "transparent" },
    "title": { "offset": 20, "anchor": "start", "font": "Gill Sans" },
    "customFormatTypes": true
  }
}
