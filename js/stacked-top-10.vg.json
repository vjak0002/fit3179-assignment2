{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "What makes a country happy?",
    "subtitle": "Data for Year 2022"
  },
  "width": 300,
  "height": 400,
  "background": "#E8E8E8",
  "data": {
    "url": "data/countries-factors-2022.csv",
    "format": { "type": "csv" }
  },
  "transform": [
    {
      "calculate": "join([datum.rank,'. ',datum.country,' (',datum.score,')'], '')",
      "as": "y-axis labels"
    },
    { "filter": "datum.rank <= 10" }
  ],
  "mark": "bar",
  "encoding": {
    "x": {
      "field": "Factor Score",
      "type": "quantitative",
      "title": "Happiness Index",
      "axis": {
        "labelFont": "Gill Sans",
        "titleFont": "Gill Sans"
      },
      "scale": { "domain": [0, 10] }
    },
    "y": {
      "field": "y-axis labels",
      "type": "nominal",
      "title": "",
      "sort": {
        "field": "datum.rank",
        "order": "ascending"
      },
      "axis": {
        "labelAlign": "left",
        "labelPadding": 120,
        "ticks": false,
        "labelFont": "Gill Sans"
      }
    },
    "color": {
      "field": "Factor",
      "type": "nominal",
      "title": "Explained by",
      "scale": {
        "domain": [
          "Dystopia + residual",
          "Freedom - Life Choices",
          "GDP per capita",
          "Generosity",
          "Healthy life expectancy",
          "Perceptions of corruption",
          "Social support"
        ],
        "range": [
          "#003f5c",
          "#374c80",
          "#7a5195",
          "#bc5090",
          "#ef5675",
          "#ff764a",
          "#ffa600"
        ]
      }
    },
    "tooltip": [
      {
        "field": "Factor",
        "type": "nominal",
        "title": "Explained by"
      },
      {
        "field": "Factor Score",
        "type": "quantitative",
        "title": "Happiness Index"
      }
    ]
  },
  "config": {
    "view": { "stroke": "transparent" },
    "title": {
      "offset": 20,
      "anchor": "start",
      "font": "Gill Sans",
      "subtitleFont": "Gill Sans"
    },
    "legend": {
      "orient": "none",
      "legendX": 375,
      "legendY": 125,
      "labelFont": "Gill Sans",
      "labelFontSize": 15,
      "titleFont": "Gill Sans",
      "titleFontSize": 14
    },
    "axis": {
      "labelFontSize": 12
    }
  }
}
