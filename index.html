<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <title>FIT3179 Visualisation 2</title>

  <link rel="stylesheet" href="" />
  <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.5.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-tooltip@0.28.0"></script>

  <link rel="stylesheet" href="css/index.css" />
</head>

<body>
  <div id="page-loader"></div>

  <div class="viz-grid">
    <div class="viz-row">
      <div id="viz-title">
        <h1>&#x263A World Happiness Report &#x263A</h1>
      </div>
    </div>

    <div class="viz-row" id="viz-intro-row">
      <div id="viz-intro">
        <p>
          <b>World Happiness Report</b> is a survey of the state of global happiness
          that <b>ranks 146 countries</b> by how <b>happy</b> their <b>citizens</b> perceive
          themselves to be. The <b>Happiness Index</b> is a score between <b>0</b> and <b>10</b>,
          with <b>10</b> being the <b>happiest</b>. The report is based on answers to the
          main life evaluation question asked in the poll. The question was
          worded as follows: "Please imagine a ladder, with steps numbered
          from 0 at the bottom to 10 at the top. The top of the ladder
          represents the best possible life for you and the bottom of the
          ladder represents the worst possible life for you. On which step of
          would you say you personally feel you stand at this time?"
        </p>
      </div>
    </div>

    <div class="viz-row" id="map-box">
      <div id="map-viz"></div>

      <div id="map-viz-footer">
        <div id="country-details-instruction">
          Hover over a country to view more details!
        </div>
        <div id="country-details-hover">
          <span id="country-rank" class="map-viz-footer-item"></span>
          <span id="continent-name" class="map-viz-footer-item"></span>
          <span id="country-name" class="map-viz-footer-item"></span>
          <span id="country-score" class="map-viz-footer-item"></span>
        </div>
      </div>
    </div>

    <div class="viz-row" id="viz-text-row">
      <div class="viz-text">
        <b>North America</b>, <b>Northern Europe</b> and <b>Oceania</b> seem to be the <b>happiest</b>. Africa overall
        is below the average world happiness index (~5.5), we expect this as these countries have a low GDP per
        capita and a low Healthy Life Expectancy. <b>China</b> is an interesting situation, it is <b>growing
          economically</b> but the <b>happiness</b> of its citizens is <b>not increasing</b>. This could be due to the
        fact that the Chinese <b>government</b> is <b>not doing</b> enough to improve the <b>income inequality</b> and
        the <b>happiness</b> of its citizens.
      </div>
    </div>

    <div class="viz-row">
      <div id="viz-1"></div>
      <div id="viz-1-2-text">
        <div id="legend-title">
          <b>Explained By: </b><br>
          <span id="legend-subtitle">Hover over labels to learn more</span>
        </div>
        <div class="legend-label tooltip">
          <span class="legend-box" id="dystopia"></span> Dystopia + Residual &#9432;<br>
          <span class="tooltiptext">
            <b>Dystopia</b> is a combination of two Greek words 'dys' meaning <b>bad</b> and 'topos' meaning
            <b>place</b>. In this context, Dystopia refers to an <b>imaginary country</b> that has the <b>unhappiest
              people</b> in the world. <b>Residual</b> is the <b>unexplained</b> variance in the Happiness Index.</span>
        </div>
        <div class="legend-label tooltip">
          <span class="legend-box" id="freedom"></span>Freedom: Life Choices &#9432;<br>
          <span class="tooltiptext">
            <b>Freedom</b> is the <b>average</b> of the responses to the question: "Are you satisfied or
            dissatisfied with your freedom to choose what you do with your life?"</span>
        </div>
        <div class="legend-label tooltip">
          <span class="legend-box" id="gdp"></span>GDP per capita &#9432;<br>
          <span class="tooltiptext">
            <b>GDP</b> is the <b>average</b> of the responses to the question: "How would you rate your standard of
            living?"</span>
        </div>
        <div class="legend-label tooltip">
          <span class="legend-box" id="generosity"></span>Generosity &#9432;<br>
          <span class="tooltiptext">
            <b>Generosity</b> is the <b>average</b> of the responses to the question: "Have you donated money to a
            charity in the past month?"</span>
        </div>
        <div class="legend-label tooltip">
          <span class="legend-box" id="life"></span>Healthy Life Expectancy &#9432;<br>
          <span class="tooltiptext">
            <b>Life Expectancy</b> is the <b>average</b> of the responses to the
            question: "How many years do you expect to live?"
          </span>
        </div>
        <div class="legend-label tooltip">
          <span class="legend-box" id="corruption"></span>Perceptions of Corruption &#9432;<br>
          <span class="tooltiptext">
            <b>Corruption</b> is the <b>average</b> of the responses to the question:
            "Is corruption widespread throughout the government or not?"
          </span>
        </div>
        <div class="legend-label tooltip">
          <span class="legend-box" id="social"></span>Social Support &#9432;<br>
          <span class="tooltiptext">
            <b>Social Support</b> is the <b>average</b> of the responses to the question:
            "If you were in trouble, do you have relatives or friends you can count on to help you whenever you need
            them, or not?"
          </span>
        </div>
      </div>
      <div id="viz-2"></div>
    </div>

    <div class="viz-row" id="viz-text-row">
      <div class="viz-text">

      </div>
    </div>

    <div class="viz-row">
      <div id="viz-3"></div>
      <div id="viz-3-4-text"></div>
      <div id="viz-4"></div>
    </div>
  </div>

  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", () => {
      setTimeout(() => {
        document.getElementById("page-loader").style.display = "none";
      }, 50);
    });

    vegaEmbed("#map-viz", "js/countries_map.vg.json", {
      tooltip: {
        theme: "dark",
      },
    })
      .then(function (result) {
        result.view.addEventListener("mouseover", function (event, item) {

          if (item.datum.country != null) {
            document.getElementById(
              "country-details-instruction"
            ).style.display = "none";
            document.getElementById("country-details-hover").style.display =
              "block";
          } else {
            document.getElementById(
              "country-details-instruction"
            ).style.display = "block";
            document.getElementById("country-details-hover").style.display =
              "none";
          }
          document.getElementById("country-rank").innerHTML =
            "<b>Rank</b>: " + item.datum.rank;
          document.getElementById("continent-name").innerHTML =
            "<b>Continent</b>: " + item.datum.properties.CONTINENT;
          document.getElementById("country-name").innerHTML =
            "<b>Name</b>: " + item.datum.country;
          document.getElementById("country-score").innerHTML =
            "<b>Happiness Index</b>: " + item.datum.score;
        });
      })
      .catch(console.error);

    vegaEmbed("#viz-1", "js/stacked-top-10.vg.json")
      .then(function (result) { })
      .catch(console.error);

    vegaEmbed("#viz-2", "js/stacked-bottom-10.vg.json")
      .then(function (result) { })
      .catch(console.error);

    vegaEmbed("#viz-3", "js/line-chart.vg.json")
      .then(function (result) { })
      .catch(console.error);

    vegaEmbed("#viz-4", "js/waterfall-chart.vg.json")
      .then(function (result) { })
      .catch(console.error);
  </script>
</body>

</html>